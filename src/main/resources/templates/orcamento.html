<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciamento de Orçamento</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Georgia', serif;
            background-color: white;
            backdrop-filter: blur(10px);
            margin: 0;
            color: black;
        }
        .decor-circle {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(94, 197, 126, 0.3); /* Verde com transparência */
            z-index: -1; /* Certifica que fique atrás de outros elementos */
        }
        .circle1 {
            width: 150px;
            height: 150px;
            top: 50px; /* Ajuste conforme necessário */
            left: 50px; /* Ajuste conforme necessário */
        }
        .circle2 {
            width: 100px;
            height: 100px;
            bottom: 50px; /* Ajuste conforme necessário */
            right: 100px; /* Ajuste conforme necessário */
        }
        /* Estilo do contêiner fixo à direita */
        .container-right {
            position: fixed;
            top: 40px;
            right: 20px;
            width: 600px; /* Largura do contêiner */
            padding: 30px;
            display: flex;
            align-items: center;
            justify-content: center; /* Centraliza horizontalmente */
            margin-top: 10px;
        }
        /* Estilo para as imagens */
        .container-right img {
            width: 80%; /* Ajusta a largura das imagens ao tamanho do contêiner */
            height: auto;
        }
        .navbar {
            display: flex;
            justify-content: space-between; /* deixa os botões alinhados, Alinha os itens da barra de navegação */
            padding: 0;
            margin: 20px;
        }
        .navbar img {
            width: 50px; /* Tamanho ajustado da logo */
            height: auto;
            margin-left: 20px; /* Margem esquerda da logo */
        }
        .navbar button {
            background-color: white; /* Cor branca */
            color: black; /* Cor do texto */
            border: 3px solid #004d00; /* Borda verde escura */
            border-radius: 5px;
            padding: 8px 12px;
            margin: 0 8px;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s, transform 0.3s;
        }
        .navbar button:hover {
            background-color: rgba(79, 175, 104, 0.8); /* Cor de destaque */
            transform: translateY(-2px);
        }
        .navbar button i {
            margin-right: 8px;
        }
        .special-button {
            display: inline-block; /* Para garantir que o elemento se comporte como um botão */
            background-color: white; /* Cor branca */
            color: black; /* Cor do texto */
            border: 3px solid #004d00; /* Borda verde escura */
            padding: 8px 12px;
            margin: 0 8px;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s, transform 0.3s;
            text-align: center; /* Centraliza o texto dentro do botão */
        }
        .special-button:hover {
            background-color: rgba(79, 175, 104, 0.8); /* Cor de destaque */
            transform: translateY(-2px);
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center; /* Centraliza os elementos horizontalmente */
            justify-content: center; /* Centraliza os elementos verticalmente */
            height: calc(65vh - 50px);
            padding: 20px;
            margin-left: 20px;
        }
        .content {
            max-width: 600px;
            margin-top: 20px;
            text-align: center; /* Centraliza o texto */
        }
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }
        .titulo {
            font-size: 20px;
            color: black;
            display: flex;
            align-items: center;
            margin-top: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            font-size: 16px;
            margin-bottom: 5px;
            display: block;
        }
        input, select {
            width: 100%;
            padding: 8px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .result {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        /* Estilo para os orçamentos criados */
        .budget-item {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            text-align: center; /* Centraliza o texto */
        }
        .budget-item:hover {
            transform: translateY(-5px);
        }
        .budget-item p {
            margin: 5px 0;
            font-size: 16px;
        }
        .budget-item strong {
            color: #004d00;
        }
        .delete-button {
            background-color: #ff4d4d;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .delete-button:hover {
            background-color: #ff1a1a;
        }
        /* Estilo para o campo de texto e select juntos */
        .user-input-group {
            display: flex;
            gap: 10px;
        }
        .user-input-group input {
            flex: 1;
        }
        .user-input-group select {
            flex: 1;
        }
    </style>
</head>
<body>
<div class="decor-circle circle1"></div>
<div class="decor-circle circle2"></div>
<div class="navbar">
    <img src="https://cdn-icons-png.flaticon.com/512/9309/9309051.png" alt="Logo">
    <div style="display: inline-block; margin-right: 20px;">
        <button onclick="window.location.href='/'"><i class="fas fa-home"></i> Home </button>
        <button onclick="window.location.href='/usuarios'"><i class="fas fa-user-plus"></i> Cadastro de Usuário </button>
        <button onclick="window.location.href='/usuarios/pesquisa'"> <i class="fas fa-users"></i> Usuários Cadastrados </button>
        <button onclick="window.location.href='/orcamentos'"> <i class="fas fa-balance-scale"></i> Gerenciamento de Orçamento </button>
    </div>
</div>
<div class="container">
    <div class="content">
        <h1 class="titulo">Novo Orçamento</h1>
        <div class="form-group user-input-group">
            <div>
                <label for="userId">Selecione o ID do Usuário:</label>
                <select id="userId">
                    <option value="">Selecione um usuário</option>
                    <option value="1">Usuário 1</option>
                    <option value="2">Usuário 2</option>
                    <!-- Adicione mais opções conforme necessário -->
                </select>
            </div>
            <div>
                <label for="userText">Digite o Nome do Usuário:</label>
                <input type="text" id="userText" placeholder="Digite o nome do usuário">
            </div>
        </div>
        <div class="form-group">
            <label for="state">Selecione o Estado:</label>
            <select id="state" onchange="calculateICMS()">
                <option value="">Selecione um estado</option>
                <option value="SP">São Paulo</option>
                <option value="RJ">Rio de Janeiro</option>
                <option value="MG">Minas Gerais</option>
                <option value="ES">Espírito Santo</option>
            </select>
        </div>
        <div class="form-group">
            <label for="value">Valor do Orçamento:</label>
            <input type="number" id="value" placeholder="Digite o valor" oninput="calculateICMS()">
        </div>
        <div class="result" id="result"></div>
        <div class="special-button" onclick="submitBudget()">
            <i class="fas fa-plus-circle"></i> Criar Orçamento
        </div>
        <div class="result" id="createdBudgets"></div>
    </div>
</div>
<div class="container-right">
    <img src="https://img.freepik.com/vetores-gratis/ilustracao-do-conceito-de-preparacao-de-impostos_114360-16337.jpg?ga=GA1.1.127442308.1728697082&semt=ais_hybrid" alt="Imagem 1">
</div>
<script>
    // Enum para os valores de ICMS por estado
    const icmsRates = {
        'SP': 0.18,
        'RJ': 0.20,
        'MG': 0.17,
        'ES': 0.19
    };

    // Função para calcular o ICMS
    function calculateICMS() {
        const state = document.getElementById('state').value;
        const value = parseFloat(document.getElementById('value').value);
        if (state && value) {
            const icmsRate = icmsRates[state];
            const icmsValue = value * icmsRate;
            const totalValue = value + icmsValue;
            document.getElementById('result').innerText = `ICMS: R$ ${icmsValue.toFixed(2)} | Valor Total: R$ ${totalValue.toFixed(2)}`;
        } else {
            document.getElementById('result').innerText = '';
        }
    }

    // Função para submeter o orçamento
    function submitBudget() {
        const userId = document.getElementById('userId').value;
        const userName = document.getElementById('userText').value;
        const state = document.getElementById('state').value;
        const value = parseFloat(document.getElementById('value').value);

        if (!userId && !userName) {
            alert('Por favor, insira o ID ou o nome do usuário.');
            return;
        }
        if (!state) {
            alert('Por favor, selecione um estado.');
            return;
        }
        if (!value || value <= 0) {
            alert('Por favor, insira um valor válido.');
            return;
        }

        // Calcular o ICMS e o valor total
        const icmsRate = icmsRates[state];
        const icmsValue = value * icmsRate;
        const totalValue = value + icmsValue;

        // Criar um novo elemento para exibir o orçamento criado
        const budgetElement = document.createElement('div');
        budgetElement.classList.add('budget-item');
        budgetElement.innerHTML = `
                <p><strong>Usuário ID:</strong> ${userId || 'N/A'}</p>
                <p><strong>Usuário Nome:</strong> ${userName || 'N/A'}</p>
                <p><strong>Estado:</strong> ${state}</p>
                <p><strong>Valor do Orçamento:</strong> R$ ${value.toFixed(2)}</p>
                <p><strong>ICMS:</strong> R$ ${icmsValue.toFixed(2)}</p>
                <p><strong>Valor Total:</strong> R$ ${totalValue.toFixed(2)}</p>
                <button class="delete-button" onclick="deleteBudget(this)">Excluir</button>
                <hr>
            `;

        // Adicionar o novo orçamento ao contêiner de orçamentos criados
        document.getElementById('createdBudgets').appendChild(budgetElement);

        // Limpar os campos do formulário
        document.getElementById('userId').value = '';
        document.getElementById('userText').value = '';
        document.getElementById('state').value = '';
        document.getElementById('value').value = '';
        document.getElementById('result').innerText = '';
    }

    // Função para excluir um orçamento
    function deleteBudget(button) {
        const budgetItem = button.parentElement;
        budgetItem.remove();
    }
</script>
</body>
</html>